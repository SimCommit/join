<div class="dialog-overlay" (click)="closeDialog()">
  <div class="dialog-content" (click)="$event.stopPropagation()">
    <div class="dialog-header">
      <div class="task-category-badge" [ngClass]="task?.category === 'User Story' ? 'user-story' : 'technical-task'">
        {{ task?.category }}
      </div>
      <button class="close-btn" (click)="closeDialog()">Ã—</button>
    </div>
    
    <div class="dialog-body">
      @if (!isEditMode) {
        <app-task-details 
          [task]="task" 
          (editClicked)="onEditClicked()" 
          (deleteClicked)="onDeleteClicked($event)"
          (subtaskToggled)="onSubtaskToggled($event)">
        </app-task-details>
      } @else {
        <app-task-edit-form 
          [task]="task" 
          (saveClicked)="onSaveClicked($event)" 
          (cancelClicked)="onCancelClicked()">
        </app-task-edit-form>
      }
    </div>
  </div>
</div>