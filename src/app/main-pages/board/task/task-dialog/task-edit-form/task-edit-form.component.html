<form [formGroup]="editForm" class="edit-form">
  <div class="form-group">
    <label>Title*</label>
    <input type="text" formControlName="title" class="form-input" />
  </div>
  
  <div class="form-group">
    <label>Description</label>
    <textarea formControlName="description" class="form-textarea" rows="4"></textarea>
  </div>
  
  <div class="form-group">
    <label>Due Date</label>
    <input type="date" formControlName="dueDate" class="form-input" />
  </div>
  
  <div class="form-group">
    <label>Priority</label>
    <select formControlName="priority" class="form-select">
      <option value="low">Low</option>
      <option value="medium">Medium</option>
      <option value="urgent">Urgent</option>
    </select>
  </div>
  
  <div class="form-group">
    <label>Assigned To</label>
    <div class="contacts-list">
      @for (contact of getAvailableContacts(); track contact) {
      <div class="contact-item">
        <input 
          type="checkbox" 
          [checked]="isUserAssigned(contact)"
          (change)="toggleAssignedUser(contact)"
          class="contact-checkbox" />
        <div class="user-avatar" [style.background-color]="getRandomColor(contact)">
          {{ getInitials(contact) }}
        </div>
        <span>{{ contact }}</span>
      </div>
      }
    </div>
  </div>
  
  <div class="form-group">
    <div class="subtasks-header">
      <label>Subtasks</label>
      <button type="button" class="add-subtask-btn" (click)="addSubtask()">+ Add Subtask</button>
    </div>
    <div class="subtasks-edit-list">
      @for (subtask of editForm.get('subtasks')?.value; track $index) {
      <div class="subtask-edit-item">
        <span class="subtask-title">{{ subtask.title }}</span>
        <button type="button" class="remove-subtask-btn" (click)="removeSubtask($index)">Ã—</button>
      </div>
      }
    </div>
  </div>
</form>

<div class="dialog-actions">
  <button class="action-btn cancel-btn" (click)="onCancelClick()">
    <span>Cancel</span>
  </button>
  <button class="action-btn save-btn" (click)="onSaveClick()" [disabled]="editForm.invalid">
    <span>Save</span>
  </button>
</div>
