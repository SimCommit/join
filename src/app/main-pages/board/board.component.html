<div class="board-container">
  <h1>Board</h1>
  
  <div class="board-columns">
    @for (column of columns$ | async; track column.id) {
    <div class="column">
      <div class="column-header">
        <h2>{{ column.title }}</h2>
        <button 
          class="add-task-btn" 
          (click)="quickAddTask(column.status)"
          title="Add new task">
          +
        </button>
      </div>
      
      <div class="column-content">
        @if (column.tasks.length === 0) {
        <div class="empty-column">
          <p>No tasks in {{ column.title }}</p>
        </div>
        } @else {
        @for (task of column.tasks; track task.id) {
        <app-task-card [task]="task" (taskClicked)="openTaskDetails($event)"></app-task-card>
        }
        }
      </div>
    </div>
    }
  </div>
</div>

@if (showTaskDialog && selectedTask) {
  <app-task-dialog 
    [task]="selectedTask" 
    [isEditMode]="isEditMode"
    (closeClicked)="closeTaskDialog()"
    (editClicked)="editTask()"
    (deleteClicked)="deleteTask($event)"
    (saveClicked)="saveTask($event)"
    (subtaskToggled)="toggleSubtask($event)">
  </app-task-dialog>
}