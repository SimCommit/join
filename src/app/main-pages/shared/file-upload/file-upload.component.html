<section>
    <p id="attachments-heading">Attachments</p>

    <div class="upload-info-bar">
        <small>Supported formats: JPEG, JPG, PNG, WEBP</small>
        @if (imagesForUpload.length > 0) {
        <button type="button" (click)="deleteAllImagesFromForm()">
            <img aria-hidden="true" src="./img/icons/delete_contact.svg" alt="">
            Delete all
        </button>
        }
    </div>

    <div class="dropzone" (dragover)="$event.preventDefault()" (drop)="addImagesByDrop($event)">
        <span>Drag a file or browse</span>
        <button type="button" (click)="filepicker.click()" aria-label="filepicker"
            aria-describedby="attachments-heading filepicker-error">
            <img aria-hidden="true" src="./img/icons/plus-upload.svg" alt="">
        </button>
        <input type="file" name="filepicker" id="filepicker" #filepicker
            accept="image/jpeg, image/png, image/webp" multiple>
    </div>

    <app-attachments-gallery [imagesForUpload]="imagesForUpload" [deleteIsEnabled]="true"
        (deleteSingelImage)="deleteSingelImage($event)"></app-attachments-gallery>

    @if (invalidFiles.length > 0) {
    <div id="filepicker-error" class="wrong-format">
        @for (name of invalidFiles; track $index) {
        <p><strong>Invalid format: {{name}}</strong></p>
        }
        <p>You can only upload JPEG, JPG, PNG and WEBP.</p>
    </div>
    }

    @if (oversizedImages.length > 0) {
    <div id="filepicker-error" class="wrong-format">
        @for (name of oversizedImages; track $index) {
        <p><strong>Oversized image: {{name}}</strong></p>
        }
        <p>Image file must be smaller than 10 MB.</p>
    </div>
    }

    @if (oversizedCompressedImages.length > 0) {
    <div id="filepicker-error" class="wrong-format">
        @for (name of oversizedCompressedImages; track $index) {
        <p><strong>Oversized image: {{name}}</strong></p>
        }
        <p>Image must be smaller than 160 KB after compression.</p>
    </div>
    }

    @if (errorToManyImages()) {
    <div id="filepicker-error" class="wrong-format">
        <p><strong>Too many files!</strong></p>
        <p>You can upload up to 5 images.</p>
    </div>
    }
</section>